<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.7.2/Chart.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/chartjs-plugin-annotation/0.5.7/chartjs-plugin-annotation.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@0.5.0"></script>


<ion-header>
  <navbar title="Verlauf DEMMI" subTitle="de Morton Mobility Index" (searchbarVisibilityChange)="onSearchbarVisibilityChange($event)"></navbar>
</ion-header>

<ion-content padding>
  <ion-label class="patient">
    {{viewPatient(patient)}}
  </ion-label>

  <div class="col score">
    <div class="row">
      <ion-item>
        <ion-label class="bold">Rohwert</ion-label>
        <ion-label class="nr">??</ion-label>
        <ion-label class="nr">/ 19</ion-label>
      </ion-item>
    </div>
    <div class="row">
      <ion-item>
        <ion-label class="bold">DEMMI Score</ion-label>
        <ion-label class="nr">??</ion-label>
        <ion-label class="nr">/ 100</ion-label>
      </ion-item>
    </div>
  </div>

  <ion-card>
    <ion-card-content>
      <canvas id="lineChart" #lineCanvas></canvas>
    </ion-card-content>
  </ion-card>

  <ion-list radio-group [(ngModel)]="scoreToDemmiScore" class="differenceUnderChart">
    <ion-label class="bar-stable bold">
      DEMMI Rohwert Umrechnungstabelle:
    </ion-label>
    <div class="row" ng-repeat="data in ctrl.data">
      <div class="col">
        <ion-item class="rohwert">
          <ion-label class="textLeft bold">Rohwert</ion-label>
        </ion-item>
        <ion-item class="demmi">
          <ion-label class="textLeft bold">DEMMI Score</ion-label>
        </ion-item>
      </div>
      <div class="col demmiAmpel">
        <ion-item class="red">
          <ion-label>0</ion-label>
        </ion-item>
        <ion-item class="red down">
          <ion-label>0</ion-label>
        </ion-item>
      </div>
      <div class="col demmiAmpel">
        <ion-item class="red">
          <ion-label>1</ion-label>
        </ion-item>
        <ion-item class="red down">
          <ion-label>8</ion-label>
        </ion-item>
      </div>
      <div class="col demmiAmpel">
        <ion-item class="red">
          <ion-label>2</ion-label>
        </ion-item>
        <ion-item class="red down">
          <ion-label>15</ion-label>
        </ion-item>
      </div>
      <div class="col demmiAmpel">
        <ion-item class="red">
          <ion-label>3</ion-label>
        </ion-item>
        <ion-item class="red down">
          <ion-label>20</ion-label>
        </ion-item>
      </div>
      <div class="col demmiAmpel">
        <ion-item class="red">
          <ion-label>4</ion-label>
        </ion-item>
        <ion-item class="red down">
          <ion-label>24</ion-label>
        </ion-item>
      </div>
      <div class="col demmiAmpel">
        <ion-item class="red">
          <ion-label>5</ion-label>
        </ion-item>
        <ion-item class="red down">
          <ion-label>27</ion-label>
        </ion-item>
      </div>
      <div class="col demmiAmpel">
        <ion-item class="red">
          <ion-label>6</ion-label>
        </ion-item>
        <ion-item class="red down">
          <ion-label>30</ion-label>
        </ion-item>
      </div>
      <div class="col demmiAmpel">
        <ion-item class="red">
          <ion-label>7</ion-label>
        </ion-item>
        <ion-item class="red down">
          <ion-label>33</ion-label>
        </ion-item>
      </div>
      <div class="col demmiAmpel">
        <ion-item class="red">
          <ion-label>8</ion-label>
        </ion-item>
        <ion-item class="red down">
          <ion-label>36</ion-label>
        </ion-item>
      </div>
      <div class="col demmiAmpel">
        <ion-item class="red">
          <ion-label>9</ion-label>
        </ion-item>
        <ion-item class="red down">
          <ion-label>39</ion-label>
        </ion-item>
      </div>
      <div class="col demmiAmpel">
        <ion-item class="orange">
          <ion-label>10</ion-label>
        </ion-item>
        <ion-item class="orange down">
          <ion-label>41</ion-label>
        </ion-item>
      </div>
      <div class="col demmiAmpel">
        <ion-item class="orange">
          <ion-label>11</ion-label>
        </ion-item>
        <ion-item class="orange down">
          <ion-label>44</ion-label>
        </ion-item>
      </div>
      <div class="col demmiAmpel">
        <ion-item class="orange">
          <ion-label>12</ion-label>
        </ion-item>
        <ion-item class="orange down">
          <ion-label>48</ion-label>
        </ion-item>
      </div>
      <div class="col demmiAmpel">
        <ion-item class="orange">
          <ion-label>13</ion-label>
        </ion-item>
        <ion-item class="orange down">
          <ion-label>53</ion-label>
        </ion-item>
      </div>
      <div class="col demmiAmpel">
        <ion-item class="orange">
          <ion-label>14</ion-label>
        </ion-item>
        <ion-item class="orange down">
          <ion-label>57</ion-label>
        </ion-item>
      </div>
      <div class="col demmiAmpel">
        <ion-item class="yellow">
          <ion-label>15</ion-label>
        </ion-item>
        <ion-item class="yellow down">
          <ion-label>62</ion-label>
        </ion-item>
      </div>
      <div class="col demmiAmpel">
        <ion-item class="yellow">
          <ion-label>16</ion-label>
        </ion-item>
        <ion-item class="yellow down">
          <ion-label>67</ion-label>
        </ion-item>
      </div>
      <div class="col demmiAmpel">
        <ion-item class="green">
          <ion-label>17</ion-label>
        </ion-item>
        <ion-item class="green down">
          <ion-label>74</ion-label>
        </ion-item>
      </div>
      <div class="col demmiAmpel">
        <ion-item class="green">
          <ion-label>18</ion-label>
        </ion-item>
        <ion-item class="green down">
          <ion-label>85</ion-label>
        </ion-item>
      </div>
      <div class="col demmiAmpel">
        <ion-item class="green last">
          <ion-label>19</ion-label>
        </ion-item>
        <ion-item class="green down last">
          <ion-label>100</ion-label>
        </ion-item>
      </div>
    </div>
  </ion-list>

  <ion-list radio-group [(ngModel)]="normwerte" class="difference">
    <ion-label class="bar-stable bold">
      Normwerte:
    </ion-label>
    <div class="row" ng-repeat="data in ctrl.data">
      <div class="col">
        <ion-item class="rohwert">
          <ion-label class="textLeft bold">Selbstständig oder betreutes Wohnen</ion-label>
        </ion-item>
        <ion-item class="demmi">
          <ion-label></ion-label>
        </ion-item>
      </div>
      <div class="col normNr">
        <ion-item class="bordr">
          <ion-label class="bold">Alter</ion-label>
        </ion-item>
        <ion-item class="bordr down">
          <ion-label class="bold">Score</ion-label>
        </ion-item>
      </div>
      <div class="col normNr">
        <ion-item class="bordr normColor1">
          <ion-label>60-69</ion-label>
        </ion-item>
        <ion-item class="bordr down normColor1">
          <ion-label>85</ion-label>
        </ion-item>
      </div>
      <div class="col normNr">
        <ion-item class="bordr normColor2">
          <ion-label>70-79</ion-label>
        </ion-item>
        <ion-item class="bordr down normColor2">
          <ion-label>85</ion-label>
        </ion-item>
      </div>
      <div class="col normNr">
        <ion-item class="bordr last normColor3">
          <ion-label>80-89</ion-label>
        </ion-item>
        <ion-item class="bordr down last normColor3">
          <ion-label>74</ion-label>
        </ion-item>
      </div>
    </div>
  </ion-list>

  <ion-list radio-group [(ngModel)]="austritt" class="difference">
    <div class="row" ng-repeat="data in ctrl.data">
      <div class="col">
        <ion-item class="rohwert">
          <ion-label class="textLeft bold">Austritt</ion-label>
        </ion-item>
        <ion-item class="demmi">
          <ion-label class="textLeft bold">Score</ion-label>
        </ion-item>
      </div>
      <div class="col normNrV2">
        <ion-item class="bordr normColor1">
          <ion-label class="bold">andere Institution</ion-label>
        </ion-item>
        <ion-item class="bordr down normColor1">
          <ion-label>40-50</ion-label>
        </ion-item>
      </div>
      <div class="col normNrV2">
        <ion-item class="bordr last normColor2">
          <ion-label class="bold">nach Hause</ion-label>
        </ion-item>
        <ion-item class="bordr down last normColor2">
          <ion-label>≥62</ion-label>
        </ion-item>
      </div>
    </div>
  </ion-list>

  <ion-label class="difference textSize"><b>Beachte:</b>
    <ul><li>Minimal Detectable Change (MDC) = 9/100 Punkten</li>
      <li>Minimal Clinically Important Difference (MCID) = 10/100 Punkte</li></ul>
  </ion-label>
</ion-content>
